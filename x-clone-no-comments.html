<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>X Clone</title>

<style>
*{
  box-sizing:border-box;
  margin:0;
  padding:0;
  font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}

body{
  background:#000;
  color:#e7e9ea;
}

.app{
  display:grid;
  grid-template-columns:275px 1fr 350px;
  max-width:1280px;
  margin:auto;
  min-height:100vh;
}

.sidebar{
  padding:20px 12px;
  border-right:1px solid #2f3336;
  position:sticky;
  top:0;
  height:100vh;
  overflow-y:auto;
}

.logo{
  font-size:30px;
  margin-bottom:20px;
  padding:12px;
  cursor:pointer;
}

.nav-item{
  padding:12px 16px;
  border-radius:30px;
  font-size:20px;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:20px;
  margin-bottom:4px;
  transition:background 0.2s;
}

.nav-item:hover{
  background:#181818;
}

.nav-item.active{
  font-weight:bold;
}

.post-btn{
  margin-top:16px;
  background:#1d9bf0;
  color:#fff;
  border:none;
  padding:16px;
  border-radius:30px;
  width:100%;
  cursor:pointer;
  font-size:17px;
  font-weight:bold;
  transition:background 0.2s;
}

.post-btn:hover{
  background:#1a8cd8;
}

.user-info{
  margin-top:auto;
  padding:12px;
  border-radius:30px;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:12px;
}

.user-info:hover{
  background:#181818;
}

.feed{
  border-right:1px solid #2f3336;
  min-height:100vh;
}

.feed-header{
  padding:16px;
  font-size:20px;
  font-weight:bold;
  border-bottom:1px solid #2f3336;
  position:sticky;
  top:0;
  background:#000;
  backdrop-filter:blur(12px);
  z-index:10;
}

.tabs{
  display:flex;
  border-bottom:1px solid #2f3336;
}

.tab{
  flex:1;
  padding:16px;
  text-align:center;
  cursor:pointer;
  position:relative;
  transition:background 0.2s;
}

.tab:hover{
  background:#181818;
}

.tab.active{
  font-weight:bold;
}

.tab.active::after{
  content:'';
  position:absolute;
  bottom:0;
  left:50%;
  transform:translateX(-50%);
  width:60px;
  height:4px;
  background:#1d9bf0;
  border-radius:2px;
}

.composer{
  display:flex;
  gap:12px;
  padding:16px;
  border-bottom:10px solid #2f3336;
}

.avatar{
  width:48px;
  height:48px;
  border-radius:50%;
  object-fit:cover;
  flex-shrink:0;
  background:#333;
}

.composer-content{
  width:100%;
}

textarea{
  background:none;
  border:none;
  color:#fff;
  width:100%;
  font-size:20px;
  outline:none;
  resize:none;
  min-height:120px;
  font-family:inherit;
}

textarea::placeholder{
  color:#71767b;
}

.composer-actions{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:12px;
  padding-top:12px;
  border-top:1px solid #2f3336;
}

.composer-icons{
  display:flex;
  gap:4px;
}

.icon-btn{
  width:36px;
  height:36px;
  border-radius:50%;
  border:none;
  background:none;
  color:#1d9bf0;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:20px;
  transition:background 0.2s;
}

.icon-btn:hover{
  background:rgba(29,155,240,0.1);
}

.char-count{
  color:#71767b;
  font-size:14px;
  display:flex;
  align-items:center;
  gap:12px;
}

.post-tweet-btn{
  background:#1d9bf0;
  color:#fff;
  border:none;
  padding:8px 16px;
  border-radius:20px;
  cursor:pointer;
  font-weight:bold;
  font-size:15px;
  transition:background 0.2s;
}

.post-tweet-btn:hover{
  background:#1a8cd8;
}

.post-tweet-btn:disabled{
  opacity:0.5;
  cursor:not-allowed;
}

.image-preview-container{
  margin-top:12px;
  position:relative;
  border-radius:16px;
  overflow:hidden;
  max-height:400px;
}

.image-preview{
  width:100%;
  height:auto;
  display:block;
  border-radius:16px;
  border:1px solid #2f3336;
}

.remove-image{
  position:absolute;
  top:8px;
  right:8px;
  width:32px;
  height:32px;
  border-radius:50%;
  background:rgba(0,0,0,0.75);
  color:#fff;
  border:none;
  cursor:pointer;
  font-size:18px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.remove-image:hover{
  background:rgba(0,0,0,0.9);
}

.tweet{
  display:flex;
  gap:12px;
  padding:12px 16px;
  border-bottom:1px solid #2f3336;
  cursor:pointer;
  transition:background 0.2s;
}

.tweet:hover{
  background:#080808;
}

.tweet-content{
  flex:1;
  min-width:0;
}

.tweet-header{
  display:flex;
  align-items:center;
  gap:4px;
  flex-wrap:wrap;
}

.name{
  font-weight:bold;
  color:#e7e9ea;
}

.name:hover{
  text-decoration:underline;
}

.handle{
  color:#71767b;
}

.timestamp{
  color:#71767b;
}

.tweet-text{
  margin:8px 0;
  font-size:15px;
  line-height:20px;
  white-space:pre-wrap;
  word-wrap:break-word;
}

.tweet-image{
  width:100%;
  max-height:500px;
  object-fit:cover;
  border-radius:16px;
  border:1px solid #2f3336;
  margin-top:12px;
}

.tweet-actions{
  display:flex;
  justify-content:space-between;
  max-width:425px;
  margin-top:12px;
}

.action-btn{
  display:flex;
  align-items:center;
  gap:8px;
  color:#71767b;
  background:none;
  border:none;
  cursor:pointer;
  padding:8px;
  border-radius:20px;
  font-size:14px;
  transition:all 0.2s;
}

.action-btn:hover{
  background:rgba(29,155,240,0.1);
  color:#1d9bf0;
}

.action-btn.liked{
  color:#f91880;
}

.action-btn.liked:hover{
  background:rgba(249,24,128,0.1);
  color:#f91880;
}

.action-btn.retweeted{
  color:#00ba7c;
}

.action-btn.retweeted:hover{
  background:rgba(0,186,124,0.1);
  color:#00ba7c;
}

.explore-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));
  gap:2px;
  padding:0;
}

.explore-item{
  position:relative;
  aspect-ratio:1;
  overflow:hidden;
  cursor:pointer;
  background:#1a1a1a;
}

.explore-item img{
  width:100%;
  height:100%;
  object-fit:cover;
  transition:transform 0.3s;
}

.explore-item:hover img{
  transform:scale(1.05);
}

.explore-overlay{
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  background:linear-gradient(transparent, rgba(0,0,0,0.8));
  padding:12px;
  color:#fff;
  font-size:12px;
}

.right-sidebar{
  padding:20px 16px;
  position:sticky;
  top:0;
  height:100vh;
  overflow-y:auto;
}

.search-box{
  background:#202327;
  border-radius:30px;
  padding:12px 20px;
  margin-bottom:16px;
  display:flex;
  align-items:center;
  gap:12px;
}

.search-box input{
  background:none;
  border:none;
  color:#fff;
  outline:none;
  width:100%;
  font-size:15px;
}

.search-box input::placeholder{
  color:#71767b;
}

.widget{
  background:#16181c;
  border-radius:16px;
  overflow:hidden;
  margin-bottom:16px;
}

.widget-header{
  padding:12px 16px;
  font-size:20px;
  font-weight:bold;
}

.trend-item{
  padding:12px 16px;
  cursor:pointer;
  transition:background 0.2s;
}

.trend-item:hover{
  background:#1c1f23;
}

.trend-category{
  color:#71767b;
  font-size:13px;
}

.trend-name{
  font-weight:bold;
  margin:4px 0;
}

.trend-count{
  color:#71767b;
  font-size:13px;
}

.profile-header{
  height:200px;
  background:linear-gradient(135deg, #1d9bf0 0%, #0c5a8a 100%);
  position:relative;
}

.profile-info{
  padding:12px 16px;
}

.profile-avatar{
  width:134px;
  height:134px;
  border-radius:50%;
  border:4px solid #000;
  margin-top:-67px;
  background:#333;
}

.profile-actions{
  display:flex;
  justify-content:flex-end;
  margin-top:-40px;
  margin-bottom:12px;
}

.edit-profile-btn{
  padding:8px 16px;
  border-radius:20px;
  border:1px solid #536471;
  background:transparent;
  color:#fff;
  cursor:pointer;
  font-weight:bold;
}

.edit-profile-btn:hover{
  background:#181818;
}

.profile-name{
  font-size:20px;
  font-weight:bold;
  margin-top:8px;
}

.profile-handle{
  color:#71767b;
  margin-bottom:12px;
}

.profile-stats{
  display:flex;
  gap:20px;
  margin:12px 0;
}

.stat{
  cursor:pointer;
}

.stat:hover .stat-label{
  text-decoration:underline;
}

.stat-number{
  font-weight:bold;
  margin-right:4px;
}

.stat-label{
  color:#71767b;
}

.auth{
  max-width:400px;
  margin:100px auto;
  padding:40px;
  background:#16181c;
  border-radius:16px;
}

.auth h2{
  font-size:31px;
  margin-bottom:20px;
}

input[type="text"],
input[type="password"],
input[type="file"]{
  width:100%;
  padding:12px 16px;
  margin:10px 0;
  border-radius:4px;
  border:1px solid #2f3336;
  background:#000;
  color:#fff;
  font-size:17px;
}

input[type="file"]{
  padding:8px;
}

.auth button{
  width:100%;
  padding:12px;
  margin:10px 0;
  border-radius:30px;
  border:none;
  background:#1d9bf0;
  color:#fff;
  font-size:17px;
  font-weight:bold;
  cursor:pointer;
}

.auth button:hover{
  background:#1a8cd8;
}

.auth-link{
  color:#1d9bf0;
  cursor:pointer;
  text-align:center;
  margin-top:20px;
}

.auth-link:hover{
  text-decoration:underline;
}

.loading{
  text-align:center;
  padding:40px;
  color:#71767b;
}

.spinner{
  border:3px solid #2f3336;
  border-top:3px solid #1d9bf0;
  border-radius:50%;
  width:40px;
  height:40px;
  animation:spin 1s linear infinite;
  margin:20px auto;
}

@keyframes spin{
  0%{transform:rotate(0deg);}
  100%{transform:rotate(360deg);}
}

@media(max-width:1024px){
  .app{
    grid-template-columns:88px 1fr;
  }
  
  .right-sidebar{
    display:none;
  }
  
  .nav-item span{
    display:none;
  }
  
  .nav-item{
    justify-content:center;
  }
  
  .post-btn{
    padding:16px;
    border-radius:50%;
    width:50px;
    height:50px;
  }
  
  .post-btn span{
    display:none;
  }
  
  .user-info{
    flex-direction:column;
    gap:0;
  }
}

@media(max-width:768px){
  .app{
    grid-template-columns:1fr;
  }
  
  .sidebar{
    position:fixed;
    bottom:0;
    left:0;
    right:0;
    height:auto;
    display:flex;
    justify-content:space-around;
    border-right:none;
    border-top:1px solid #2f3336;
    padding:8px;
    z-index:100;
    background:#000;
  }
  
  .logo,
  .post-btn,
  .user-info{
    display:none;
  }
  
  .nav-item{
    padding:12px;
    margin:0;
  }
  
  .explore-grid{
    grid-template-columns:repeat(auto-fill, minmax(150px, 1fr));
  }
}

@media(max-width:500px){
  .composer{
    padding:12px;
  }
  
  .tweet{
    padding:12px;
  }
  
  .avatar{
    width:40px;
    height:40px;
  }
  
  .explore-grid{
    grid-template-columns:repeat(auto-fill, minmax(120px, 1fr));
  }
}

input[type="file"]{
  display:none;
}
</style>
</head>

<body>

<div id="authPage" class="auth">
  <div style="text-align:center;margin-bottom:20px">
    <div class="logo" style="font-size:48px">ùïè</div>
  </div>
  <h2>Sign in to X</h2>
  <input id="loginUser" type="text" placeholder="Username">
  <input id="loginPass" type="password" placeholder="Password">
  <button onclick="login()">Sign in</button>
  <div class="auth-link" onclick="showSignup()">
    Don't have an account? Sign up
  </div>
</div>

<div id="signupPage" class="auth" style="display:none">
  <div style="text-align:center;margin-bottom:20px">
    <div class="logo" style="font-size:48px">ùïè</div>
  </div>
  <h2>Create your account</h2>
  
  <div style="text-align:center;margin:20px 0">
    <img id="signupPreview" src="https://api.dicebear.com/7.x/avataaars/svg?seed=default" 
         style="width:120px;height:120px;border-radius:50%;border:3px solid #1d9bf0;cursor:pointer"
         onclick="document.getElementById('signupImageInput').click()">
    <div style="color:#71767b;font-size:14px;margin-top:8px">Click to upload profile picture</div>
  </div>
  
  <input type="file" id="signupImageInput" accept="image/*" style="display:none" onchange="previewSignupImage(event)">
  
  <input id="regUser" type="text" placeholder="Username">
  <input id="regPass" type="password" placeholder="Password">
  <input id="regBio" type="text" placeholder="Bio (optional)" style="margin-bottom:10px">
  <button onclick="signup()">Sign up</button>
  <div class="auth-link" onclick="showLogin()">
    Already have an account? Sign in
  </div>
</div>

<div id="app" style="display:none">
  <div class="app">
    
    <div class="sidebar">
      <div class="logo" onclick="showHome()">ùïè</div>
      
      <div class="nav-item" id="navHome" onclick="showHome()">
        <span style="font-size:26px">üè†</span>
        <span>Home</span>
      </div>
      
      <div class="nav-item" id="navExplore" onclick="showExplore()">
        <span style="font-size:26px">üîç</span>
        <span>Explore</span>
      </div>
      
      <div class="nav-item" id="navProfile" onclick="showProfile()">
        <span style="font-size:26px">üë§</span>
        <span>Profile</span>
      </div>
      
      <button class="post-btn" onclick="focusComposer()">
        <span>Post</span>
        <span style="font-size:24px">‚úèÔ∏è</span>
      </button>
      
      <div class="user-info" onclick="toggleUserMenu()" style="position:relative">
        <img class="avatar" id="sidebarAvatar" src="" alt="avatar">
        <div>
          <div style="font-weight:bold" id="sidebarName"></div>
          <div style="color:#71767b;font-size:14px" id="sidebarHandle"></div>
        </div>
        <span style="margin-left:auto">‚ãØ</span>
      </div>
      
      <div id="userMenu" style="display:none;position:absolute;bottom:80px;left:12px;right:12px;background:#16181c;border-radius:16px;box-shadow:0 8px 32px rgba(0,0,0,0.5);overflow:hidden;z-index:1000">
        <div style="padding:12px 16px;cursor:pointer;transition:background 0.2s" onmouseover="this.style.background='#1c1f23'" onmouseout="this.style.background='transparent'" onclick="showProfile();toggleUserMenu()">
          <span>üë§</span> View Profile
        </div>
        <div style="padding:12px 16px;cursor:pointer;transition:background 0.2s" onmouseover="this.style.background='#1c1f23'" onmouseout="this.style.background='transparent'" onclick="changeProfilePicture()">
          <span>üì∑</span> Change Profile Picture
        </div>
        <div style="border-top:1px solid #2f3336"></div>
        <div style="padding:12px 16px;cursor:pointer;transition:background 0.2s" onmouseover="this.style.background='#1c1f23'" onmouseout="this.style.background='transparent'" onclick="logout()">
          <span>üö™</span> Log out @<span id="menuHandle"></span>
        </div>
      </div>
    </div>
    
    <div class="feed">
      <div class="feed-header" id="feedHeader">Home</div>
      
      <div class="composer" id="composer">
        <img class="avatar" id="composerAvatar" src="" alt="avatar">
        
        <div class="composer-content">
          <textarea id="tweetInput" maxlength="280" placeholder="What is happening?!" oninput="updateCount()"></textarea>
          
          <div id="imagePreviewContainer"></div>
          
          <div class="composer-actions">
            <div class="composer-icons">
              <button class="icon-btn" onclick="triggerImageUpload()" title="Add photo">
                <span>üñºÔ∏è</span>
              </button>
              <input type="file" id="imageInput" accept="image/*" onchange="handleImageSelect(event)">
              <input type="file" id="profilePicInput" accept="image/*" style="display:none" onchange="handleProfilePicChange(event)">
            </div>
            
            <div style="display:flex;align-items:center;gap:12px">
              <span class="char-count" id="charCount">0 / 280</span>
              <button class="post-tweet-btn" onclick="postTweet()" id="postBtn">Post</button>
            </div>
          </div>
        </div>
      </div>
      
      <div id="feedContent"></div>
    </div>
    
    <div class="right-sidebar">
      <div class="search-box">
        <span>üîç</span>
        <input type="text" placeholder="Search">
      </div>
      
      <div class="widget">
        <div class="widget-header">What's happening</div>
        <div class="trend-item">
          <div class="trend-category">Trending</div>
          <div class="trend-name">#WebDevelopment</div>
          <div class="trend-count">15.2K posts</div>
        </div>
        <div class="trend-item">
          <div class="trend-category">Technology ¬∑ Trending</div>
          <div class="trend-name">#AI</div>
          <div class="trend-count">43.8K posts</div>
        </div>
        <div class="trend-item">
          <div class="trend-category">Programming ¬∑ Trending</div>
          <div class="trend-name">#JavaScript</div>
          <div class="trend-count">28.5K posts</div>
        </div>
      </div>
    </div>
    
  </div>
</div>

<script>

let users = JSON.parse(localStorage.getItem("users")) || [];
let tweets = JSON.parse(localStorage.getItem("tweets")) || [];
let currentUser = localStorage.getItem("currentUser");
let selectedImage = null;
let explorePhotos = [];
let signupProfilePic = null;

if(currentUser){
  showApp();
  showHome();
}

document.addEventListener('click', function(event){
  const userMenu = document.getElementById('userMenu');
  const userInfo = document.querySelector('.user-info');
  if(userMenu && !userInfo?.contains(event.target)){
    userMenu.style.display = 'none';
  }
});

function showSignup(){
  authPage.style.display = "none";
  signupPage.style.display = "block";
  signupProfilePic = null;
  signupPreview.src = "https://api.dicebear.com/7.x/avataaars/svg?seed=default";
}

function showLogin(){
  signupPage.style.display = "none";
  authPage.style.display = "block";
}

function previewSignupImage(event){
  const file = event.target.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = function(e){
      signupProfilePic = e.target.result;
      signupPreview.src = signupProfilePic;
    };
    reader.readAsDataURL(file);
  }
}

function signup(){
  const username = regUser.value.trim();
  const password = regPass.value.trim();
  const bio = regBio.value.trim();
  
  if(!username || !password){
    alert("Please enter username and password");
    return;
  }
  
  if(users.find(u => u.user === username)){
    alert("Username already exists");
    return;
  }
  
  const profilePhoto = signupProfilePic || `https://api.dicebear.com/7.x/avataaars/svg?seed=${username}`;
  
  users.push({
    user: username,
    pass: password,
    photo: profilePhoto,
    bio: bio || "New to X",
    tweets: [],
    following: 0,
    followers: 0
  });
  
  localStorage.setItem("users", JSON.stringify(users));
  alert("Account created successfully!");
  showLogin();
  regUser.value = "";
  regPass.value = "";
  regBio.value = "";
  signupProfilePic = null;
}

function login(){
  const username = loginUser.value.trim();
  const password = loginPass.value.trim();
  
  const user = users.find(u => 
    u.user === username && u.pass === password
  );
  
  if(user){
    currentUser = user.user;
    localStorage.setItem("currentUser", currentUser);
    showApp();
    showHome();
    loginUser.value = "";
    loginPass.value = "";
  }else{
    alert("Invalid credentials");
  }
}

function logout(){
  if(confirm("Log out of X?")){
    localStorage.removeItem("currentUser");
    location.reload();
  }
}

function toggleUserMenu(){
  const menu = document.getElementById('userMenu');
  if(menu.style.display === 'none' || menu.style.display === ''){
    menu.style.display = 'block';
    menuHandle.textContent = currentUser;
  }else{
    menu.style.display = 'none';
  }
}

function changeProfilePicture(){
  toggleUserMenu();
  profilePicInput.click();
}

function handleProfilePicChange(event){
  const file = event.target.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = function(e){
      const newPhoto = e.target.result;
      
      const user = users.find(u => u.user === currentUser);
      if(user){
        user.photo = newPhoto;
        localStorage.setItem("users", JSON.stringify(users));
        
        sidebarAvatar.src = newPhoto;
        composerAvatar.src = newPhoto;
        
        alert("Profile picture updated successfully!");
        
        if(feedHeader.textContent === "Profile"){
          showProfile();
        }
      }
    };
    reader.readAsDataURL(file);
  }
}

function showApp(){
  authPage.style.display = "none";
  signupPage.style.display = "none";
  app.style.display = "block";
  
  const user = users.find(u => u.user === currentUser);
  if(user){
    sidebarAvatar.src = user.photo;
    composerAvatar.src = user.photo;
    sidebarName.textContent = user.user;
    sidebarHandle.textContent = `@${user.user}`;
  }
}

function setActiveNav(id){
  document.querySelectorAll('.nav-item').forEach(item => {
    item.classList.remove('active');
  });
  document.getElementById(id)?.classList.add('active');
}

function showHome(){
  setActiveNav('navHome');
  feedHeader.textContent = "Home";
  composer.style.display = "flex";
  feedContent.innerHTML = "";
  renderTweets();
}

function showExplore(){
  setActiveNav('navExplore');
  feedHeader.textContent = "Explore";
  composer.style.display = "none";
  feedContent.innerHTML = '<div class="loading"><div class="spinner"></div>Loading photos...</div>';
  loadExplorePhotos();
}

function showProfile(){
  setActiveNav('navProfile');
  feedHeader.textContent = "Profile";
  composer.style.display = "none";
  renderProfile();
}

function triggerImageUpload(){
  imageInput.click();
}

function handleImageSelect(event){
  const file = event.target.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = function(e){
      selectedImage = e.target.result;
      displayImagePreview(selectedImage);
    };
    reader.readAsDataURL(file);
  }
}

function displayImagePreview(imageSrc){
  imagePreviewContainer.innerHTML = `
    <div class="image-preview-container">
      <img src="${imageSrc}" class="image-preview" alt="preview">
      <button class="remove-image" onclick="removeImage()">‚úï</button>
    </div>
  `;
}

function removeImage(){
  selectedImage = null;
  imagePreviewContainer.innerHTML = "";
  imageInput.value = "";
}

function updateCount(){
  const length = tweetInput.value.length;
  charCount.textContent = `${length} / 280`;
  postBtn.disabled = length === 0 && !selectedImage;
}

function focusComposer(){
  showHome();
  tweetInput.focus();
}

function postTweet(){
  const text = tweetInput.value.trim();
  
  if(!text && !selectedImage) return;
  
  const tweet = {
    id: Date.now(),
    user: currentUser,
    text: text,
    image: selectedImage,
    likes: [],
    retweets: [],
    comments: [],
    timestamp: new Date().toISOString()
  };
  
  tweets.unshift(tweet);
  localStorage.setItem("tweets", JSON.stringify(tweets));
  
  const user = users.find(u => u.user === currentUser);
  if(user){
    user.tweets.push(tweet.id);
    localStorage.setItem("users", JSON.stringify(users));
  }
  
  tweetInput.value = "";
  selectedImage = null;
  imagePreviewContainer.innerHTML = "";
  imageInput.value = "";
  charCount.textContent = "0 / 280";
  postBtn.disabled = true;
  
  renderTweets();
}

function likeTweet(id){
  const tweet = tweets.find(t => t.id === id);
  if(!tweet) return;
  
  const index = tweet.likes.indexOf(currentUser);
  if(index > -1){
    tweet.likes.splice(index, 1);
  }else{
    tweet.likes.push(currentUser);
  }
  
  localStorage.setItem("tweets", JSON.stringify(tweets));
  renderTweets();
}

function retweet(id){
  const tweet = tweets.find(t => t.id === id);
  if(!tweet) return;
  
  if(tweet.retweets.includes(currentUser)){
    tweet.retweets = tweet.retweets.filter(u => u !== currentUser);
  }else{
    tweet.retweets.push(currentUser);
  }
  
  localStorage.setItem("tweets", JSON.stringify(tweets));
  renderTweets();
}

function deleteTweet(id){
  if(confirm("Delete this post?")){
    tweets = tweets.filter(t => t.id !== id);
    localStorage.setItem("tweets", JSON.stringify(tweets));
    renderTweets();
  }
}

function getTimeAgo(timestamp){
  const now = new Date();
  const then = new Date(timestamp);
  const seconds = Math.floor((now - then) / 1000);
  
  if(seconds < 60) return `${seconds}s`;
  if(seconds < 3600) return `${Math.floor(seconds / 60)}m`;
  if(seconds < 86400) return `${Math.floor(seconds / 3600)}h`;
  return `${Math.floor(seconds / 86400)}d`;
}

function renderTweets(){
  feedContent.innerHTML = "";
  
  if(tweets.length === 0){
    feedContent.innerHTML = `
      <div class="loading">
        <p>No posts yet</p>
        <p style="color:#71767b;margin-top:8px">Start posting to see your feed!</p>
      </div>
    `;
    return;
  }
  
  tweets.forEach(tweet => {
    const user = users.find(u => u.user === tweet.user);
    const userPhoto = user?.photo || `https://api.dicebear.com/7.x/avataaars/svg?seed=${tweet.user}`;
    
    const isLiked = tweet.likes.includes(currentUser);
    const isRetweeted = tweet.retweets.includes(currentUser);
    
    const tweetElement = document.createElement('div');
    tweetElement.className = 'tweet';
    tweetElement.innerHTML = `
      <img class="avatar" src="${userPhoto}" alt="${tweet.user}">
      
      <div class="tweet-content">
        <div class="tweet-header">
          <span class="name">${tweet.user}</span>
          <span class="handle">@${tweet.user}</span>
          <span class="timestamp">¬∑ ${getTimeAgo(tweet.timestamp)}</span>
        </div>
        
        <div class="tweet-text">${tweet.text}</div>
        
        ${tweet.image ? `<img src="${tweet.image}" class="tweet-image" alt="tweet image">` : ''}
        
        <div class="tweet-actions">
          <button class="action-btn">
            <span>üí¨</span>
            <span>${tweet.comments.length}</span>
          </button>
          
          <button class="action-btn ${isRetweeted ? 'retweeted' : ''}" onclick="retweet(${tweet.id})">
            <span>üîÅ</span>
            <span>${tweet.retweets.length}</span>
          </button>
          
          <button class="action-btn ${isLiked ? 'liked' : ''}" onclick="likeTweet(${tweet.id})">
            <span>${isLiked ? '‚ù§Ô∏è' : 'ü§ç'}</span>
            <span>${tweet.likes.length}</span>
          </button>
          
          ${tweet.user === currentUser ? `
            <button class="action-btn" onclick="deleteTweet(${tweet.id})">
              <span>üóëÔ∏è</span>
            </button>
          ` : ''}
        </div>
      </div>
    `;
    
    feedContent.appendChild(tweetElement);
  });
}

async function loadExplorePhotos(){
  try {
    const response = await fetch('https://api.unsplash.com/photos/random?count=30&client_id=your-access-key-here');
    
    if(!response.ok){
      explorePhotos = [];
      for(let i = 1; i <= 30; i++){
        explorePhotos.push({
          id: i,
          url: `https://picsum.photos/400/400?random=${i}`,
          author: `User${Math.floor(Math.random() * 100)}`,
          likes: Math.floor(Math.random() * 1000)
        });
      }
    }else{
      const data = await response.json();
      explorePhotos = data.map(photo => ({
        id: photo.id,
        url: photo.urls.small,
        author: photo.user.username,
        likes: photo.likes
      }));
    }
    
    renderExplore();
  } catch(error) {
    console.error('Error loading photos:', error);
    explorePhotos = [];
    for(let i = 1; i <= 30; i++){
      explorePhotos.push({
        id: i,
        url: `https://picsum.photos/400/400?random=${i}`,
        author: `User${Math.floor(Math.random() * 100)}`,
        likes: Math.floor(Math.random() * 1000)
      });
    }
    renderExplore();
  }
}

function renderExplore(){
  feedContent.innerHTML = '<div class="explore-grid"></div>';
  const grid = feedContent.querySelector('.explore-grid');
  
  explorePhotos.forEach(photo => {
    const item = document.createElement('div');
    item.className = 'explore-item';
    item.innerHTML = `
      <img src="${photo.url}" alt="Photo by ${photo.author}" loading="lazy">
      <div class="explore-overlay">
        <div>üì∏ ${photo.author}</div>
        <div>‚ù§Ô∏è ${photo.likes}</div>
      </div>
    `;
    grid.appendChild(item);
  });
}

function renderProfile(){
  const user = users.find(u => u.user === currentUser);
  if(!user) return;
  
  const userTweets = tweets.filter(t => t.user === currentUser);
  
  feedContent.innerHTML = `
    <div class="profile-header"></div>
    
    <div class="profile-info">
      <img src="${user.photo}" class="profile-avatar" alt="${user.user}">
      
      <div class="profile-actions">
        <button class="edit-profile-btn" onclick="editProfile()">Edit profile</button>
      </div>
      
      <div class="profile-name">${user.user}</div>
      <div class="profile-handle">@${user.user}</div>
      <div style="margin:12px 0">${user.bio || 'No bio yet'}</div>
      
      <div class="profile-stats">
        <div class="stat">
          <span class="stat-number">${user.following || 0}</span>
          <span class="stat-label">Following</span>
        </div>
        <div class="stat">
          <span class="stat-number">${user.followers || 0}</span>
          <span class="stat-label">Followers</span>
        </div>
      </div>
    </div>
    
    <div class="tabs">
      <div class="tab active">Posts</div>
      <div class="tab">Replies</div>
      <div class="tab">Media</div>
      <div class="tab">Likes</div>
    </div>
    
    <div id="profileTweets"></div>
  `;
  
  const profileTweetsContainer = document.getElementById('profileTweets');
  
  if(userTweets.length === 0){
    profileTweetsContainer.innerHTML = `
      <div class="loading">
        <p>No posts yet</p>
      </div>
    `;
    return;
  }
  
  userTweets.forEach(tweet => {
    const isLiked = tweet.likes.includes(currentUser);
    const isRetweeted = tweet.retweets.includes(currentUser);
    
    const tweetElement = document.createElement('div');
    tweetElement.className = 'tweet';
    tweetElement.innerHTML = `
      <img class="avatar" src="${user.photo}" alt="${user.user}">
      
      <div class="tweet-content">
        <div class="tweet-header">
          <span class="name">${user.user}</span>
          <span class="handle">@${user.user}</span>
          <span class="timestamp">¬∑ ${getTimeAgo(tweet.timestamp)}</span>
        </div>
        
        <div class="tweet-text">${tweet.text}</div>
        
        ${tweet.image ? `<img src="${tweet.image}" class="tweet-image" alt="tweet image">` : ''}
        
        <div class="tweet-actions">
          <button class="action-btn">
            <span>üí¨</span>
            <span>${tweet.comments.length}</span>
          </button>
          
          <button class="action-btn ${isRetweeted ? 'retweeted' : ''}" onclick="retweet(${tweet.id})">
            <span>üîÅ</span>
            <span>${tweet.retweets.length}</span>
          </button>
          
          <button class="action-btn ${isLiked ? 'liked' : ''}" onclick="likeTweet(${tweet.id})">
            <span>${isLiked ? '‚ù§Ô∏è' : 'ü§ç'}</span>
            <span>${tweet.likes.length}</span>
          </button>
          
          <button class="action-btn" onclick="deleteTweet(${tweet.id})">
            <span>üóëÔ∏è</span>
          </button>
        </div>
      </div>
    `;
    
    profileTweetsContainer.appendChild(tweetElement);
  });
}

function editProfile(){
  const user = users.find(u => u.user === currentUser);
  if(!user) return;
  
  const newBio = prompt("Enter your bio:", user.bio);
  if(newBio !== null){
    user.bio = newBio;
    localStorage.setItem("users", JSON.stringify(users));
    showProfile();
  }
}

</script>

</body>
</html>
